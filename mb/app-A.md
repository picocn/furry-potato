附录A 交易脚本语言操作符，常量，符号
=====

**表A-1**列出了将值压入栈的操作符

*表A-1 入栈操作*

|符号|值（十六进制）|描述|
|----|-----|-----|
|OP_0 或 OP_FALSE| 0x00|将一个空数组压入栈中|
|1-75| 0x01-0x4b|将接下来的N字节入栈，其中N大小1到75字节|
|OP_PUSHDATA1| 0x4c|下一个脚本字节包括N，将接下来的N个字节入栈|
|OP_PUSHDATA2| 0x4d|下两个脚本字节包括N，将接下来的N个字节入栈|
|OP_PUSHDATA4| 0x4e|下四个脚本字节包括N，将接下来的N个字节入栈|
|OP_1NEGATE| 0x4f|将“–1”压入栈中k|
|OP_RESERVED| 0x50| 终止---除非在未执行的OP_IF语句中出现，交易无效|
|OP_1 或 OP_TRUE| 0x51 |将“1”入栈|
|OP_2 或 OP_16| 0x52 到 0x60|对于OP_N，将“N”入栈，比如OP_2就将“2”入栈|

**表A-2**列出了条件控制操作符

*表A-2 条件控制*

|符号|值（十六进制）|描述|
|----|----------|-------|
|OP_NOP|0x61|空操作|
|OP_VER| 0x62|终止---除非在未执行的OP_IF语句中出现，交易无效|
|OP_IF| 0x63|如果栈顶不为0，执行语句|
|OP_NOTIF| 0x64| 如果栈顶为0，执行语句|
|OP_VERIF| 0x65|终止--交易无效|
|OP_VERNOTIF| 0x66|终止--交易无效|
|OP_ELSE| 0x67|只有前面的条件语句未被执行，才会执行|
|OP_ENDIF| 0x68| OP_IF, OP_NOTIF, OP_ELSE 代码块结束标志|
|OP_VERIFY| 0x69 |检查栈顶，如果不为TRUE则终止或交易无效|
|OP_RETURN| 0x6a|终止，交易无效|

**表A-3**控制栈的操作符

*表A-3 栈操作*

|符号|值（十六进制）|描述|
|----|----------|-------|
|OP_TOALTSTACK| 0x6b|将主栈顶元素取出放入替代栈|
|OP_FROMALTSTACK| 0x6c|从替代栈栈顶取出元素放入主栈|
|OP_2DROP| 0x6d|取出栈顶两个元素|
|OP_2DUP| 0x6e|复制栈顶两个元素|
|OP_3DUP| 0x6f|复制栈顶三个元素|
|OP_2OVER| 0x70|拷贝第三和第四个元素到栈顶|
|OP_2ROT| 0x71|将第五和第六个元素移动到栈顶|
|OP_2SWAP| 0x72| 将栈顶的两对元素互换|
|OP_IFDUP| 0x73 |如果栈顶元素不为0，则复制该元素|
|OP_DEPTH| 0x74|计算栈中的元素数量，并将结果压入栈顶|
|OP_DROP| 0x75|将栈顶元素出栈|
|OP_DUP| 0x76| 复制栈顶元素|
|OP_NIP| 0x77| 将第二个元素出栈|
|OP_OVER |0x78|拷贝栈的第二个元素，并压入栈顶|
|OP_PICK| 0x79|将栈顶元素N出栈，然后拷贝第N个元素到栈顶|
|OP_ROLL| 0x7a |将栈顶元素N出栈，然后移动第N个元素到栈顶|
|OP_ROT| 0x7b| 将栈顶的三个元素翻转|
|OP_SWAP| 0x7c| 栈顶的三个元素互换
|OP_TUCK |0x7d|将栈顶元素拷贝并插入到第一和第二个元素之间|

**表A-4**列出了字符串操作符

*表A-4 字符串拼接操作符*

|符号|值（十六进制）|描述|
|----|----------|-------|
|OP_CAT| 0x7e|禁用（连接顶上两个元素）|
|OP_SUBSTR| 0x7f| 禁用（返回子字符串）|
|OP_LEFT| 0x80| 禁用（返回左子串）|
|OP_RIGHT| 0x81|  禁用（返回右子串）|
|OP_SIZE| 0x82| 计算栈顶字符串长度，并将结果压入栈顶|

**图A-5**列出了二进制运算和布尔逻辑运算操作符

*图A-5 二进制运算和条件*

|符号|值（十六进制）|描述|
|----|----------|-------|
|OP_INVERT| 0x83| 禁用（将栈顶元素按位取反）|
|OP_AND| 0x84 |禁用（顶上两个元素进行布尔与）| 
|OP_OR| 0x85| 禁用（顶上两元素布尔或） |
|OP_XOR| 0x86| 禁用（顶上两元素布尔异或）|
|OP_EQUAL| 0x87|如果两元素相等，压入TURE（1），否则压入FALSE（0）|
|OP_EQUALVERIFY| 0x88| 与OP_EQUAL相同，如果不为TRUE，则之后运行OP_VERIFY|
|OP_RESERVED1 |0x89| 终止--交易无效，除非在未执行的OP_IF子句中出现|
|OP_RESERVED2 |0x8a|终止--交易无效，除非在未执行的OP_IF子句中出现|


**表A-6**显示算术运算符

*表A-6 算术运算符*

|符号|值（十六进制）|描述|
|----|----------|-------|
|OP_1ADD |0x8b|顶部元素加1|
|OP_1SUB |0x8c|顶部元素减1|
|OP_2MUL |0x8d| 禁用（顶部元素乘2）
|OP_2DIV |0x8e| 禁用（顶部元素除2）
|OP_NEGATE| 0x8f| 顶部元素符号翻转|
|OP_ABS |0x90|顶部元素符号变为正|
|OP_NOT |0x91|如果顶部元素为0或1，则取反，否则返回0|
|OP_0NOTEQUAL |0x92|如果顶部元素为0则返回0，否则返回1|
|OP_ADD |0x93|顶部两元素出栈并相加，结果重新入栈|
|OP_SUB |0x94|顶部两元素出栈，将第二个减第一个的差入栈|
|OP_MUL |0x95| 禁用（顶部两元素相乘）|
|OP_DIV |0x96| 禁用（第二个元素除以第一个元素的商）|
|OP_MOD |0x97| 禁用（第二个元素除以第一个元素的余数）|
|OP_LSHIFT |0x98| 禁用（第二个元素左移，左移位数为第一个元素的数值）|
|OP_RSHIFT |0x99|禁用（第二个元素右移，右移位数为第一个元素的数值）|
|OP_BOOLAND |0x9a| 顶上两个元素布尔与|
|OP_BOOLOR |0x9b| 顶上两元素布尔或|
|OP_NUMEQUAL |0x9c| 如果顶上两元素相等，返回TRUE|
|OP_NUMEQUALVERIFY |0x9d| 与NUMEQUAL相同, 如果不是TRUE，进行OP_VERIFY|
|OP_NUMNOTEQUAL |0x9e|如果顶上两元素不等，返回TRUE|
|OP_LESSTHAN |0x9f|如果第二个元素比第一个小，返回TRUE|
|OP_GREATERTHAN |0xa0| 如果第二个元素比第一个打，返回TRUE|
|OP_LESSTHANOREQUAL |0xa1| 如果第二个元素小于等于第一个元素，返回TRUE|
|OP_GREATERTHANOREQUAL |0xa2| 如果第二个元素大于等于第一个元素，返回TRUE|
|OP_MIN |0xa3|返回顶上两个元素中较小的一个|
|OP_MAX |0xa4|返回顶上两个元素中较大的一个|
|OP_WITHIN |0xa5| 如果第三个元素介于第二个和第一个之间，返回TRUE|

**表A-7**显示的是加密函数操作符

*表A-7 加密和哈希操作*

|符号|值（十六进制）|描述|
|----|----------|-------|
|OP_RIPEMD160| 0xa6 |返回顶部元素的RIPEMD160哈希|
|OP_SHA1| 0xa7|返回顶部元素的SHA1哈希|
|OP_SHA256| 0xa8|返回顶部元素的SHA256哈希|
|OP_HASH160| 0xa9 |返回顶部元素的RIPEMD160(SHA256(x))哈希|
|OP_HASH256| 0xaa |返回顶部元素的SHA256(SHA256(x))哈希|
|OP_CODESEPARATOR| 0xab|标记已进行签名验证的数据的开始处|
|OP_CHECKSIG| 0xac|将公钥和签名出栈，并验证交易的签名，如果匹配返回TRUE|
|OP_CHECKSIGVERIFY| 0xad|与CHECKSIG相同,如果结果不为TRUE则执行OP_VERIFY|
|OP_CHECKMULTISIG| 0xae|对每对签名和公钥执行CHECKSIG，所有的签名和公钥都都必须能够匹配，因为存在BUG，一个未使用的外部值会从堆栈中删除。采用OP_NOP作为替代方案|
|OP_CHECKMULTISIGVERIFY |0xaf|与CHECKMULTISIG相同, 如果结果不为TRUE，则执行OP_VERIFY|

**表A-8**显示空操作符

*表A-8 空操作符*

|符号|值（十六进制）|描述|
|----|----------|-------|
|OP_NOP1-OP_NOP10| 0xb0-0xb9|不做任何操作，忽略|


**表A-9**显示保留操作符，仅供内部脚本解析使用

*表A-9 保留操作符，内部解析使用*

|符号|值（十六进制）|描述|
|----|----------|-------|
|OP_SMALLDATA| 0xf9| 表示小数据域|
|OP_SMALLINTEGER| 0xfa|表示小整数数据域| 
|OP_PUBKEYS| 0xfb| 表示多个公钥域|
|OP_PUBKEYHASH |0xfd| 表示公钥哈希域|
|OP_PUBKEY| 0xfe| 表示公钥域|
|OP_INVALIDOPCODE| 0xff| 表示任何尚未指定的操作符|

